@page "/websocket"

<h3>WebSocket Client</h3>
<div>
    <button @onclick="Connect">Connect</button>
    <button @onclick="Send">Send Message</button>
</div>
<div>
    <strong>Status:</strong> @status
</div>
<div>
    <strong>Received Message:</strong> @receivedMessage
</div>

@code {
    private string status = "Disconnected";
    private string receivedMessage = "";
    private async Task Connect()
    {
        var uri = new Uri("wss://localhost:51000");
        await Sockets.Instance.ConnectAsync(uri, CancellationToken.None);
        status = "Connected";
    }

    private async Task Send()
    {
        await Sockets.Instance.SendMessageAsync("Hello from Blazor WebSocket client!", CancellationToken.None);
    }


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

    }
}